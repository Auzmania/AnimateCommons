// EdgeCommons for Edge Animate v2.0.2 +++ Visit edgecommons.org for documentation, updates and examples +++ Copyright (c) 2013 by Simon Widjaja +++ Distributed under the terms of the MIT license (http://www.opensource.org/licenses/mit-license.html) +++ This notice shall be included in all copies or substantial portions of the Software.

!function(a,b){var c=function(){};c.VERSION="0.0.2",c.$=b,a.Modulog=c}(window,AdobeEdge.$),function(a){var b=function(){};b.VERSION="0.0.2",b.LEVEL_NONE=0,b.LEVEL_ERROR=1,b.LEVEL_WARN=2,b.LEVEL_INFO=3,b.LEVEL_DEBUG=4,b.level=b.LEVEL_DEBUG;var c=(a.$,null);b.addLogTarget=function(a){"function"==typeof a&&(c=a)},b.debug=function(a,b,c){if(ModulogLog.level>=ModulogLog.LEVEL_DEBUG){var d="[ DEBUG "+(b?"| "+b+" ":"")+"] "+a;"undefined"!=typeof console&&"undefined"!=typeof console.debug?c?console.debug(d,c):console.debug(d):"undefined"!=typeof console&&"undefined"!=typeof console.info&&(c?console.info(d,c):console.info(d)),ModulogLog.__delegate(d,c)}},b.info=function(a,b,c){if(ModulogLog.level>=ModulogLog.LEVEL_INFO){var d="[ INFO "+(b?"| "+b+" ":"")+"] "+a;"undefined"!=typeof console&&"undefined"!=typeof console.info&&(c?console.info(d,c):console.info(d)),ModulogLog.__delegate(d,c)}},b.warn=function(a,b,c){if(ModulogLog.level>=ModulogLog.LEVEL_WARN){var d="[ WARN "+(b?"| "+b+" ":"")+"] "+a;"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(c?console.warn(d,c):console.warn(d)),ModulogLog.__delegate(d,c)}},b.error=function(a,b,c){if(ModulogLog.level>=ModulogLog.LEVEL_ERROR){var d="[ ERROR "+(b?"| "+b+" ":"")+"] "+a;"undefined"!=typeof console&&"undefined"!=typeof console.error&&(c?console.error(d,c):console.error(d)),ModulogLog.__delegate(d,c)}},b.__delegate=function(a,b){c&&(b?c(a+" : "+b.toString()):c(a))},window.Log=window.MLog=window.ModulogLog=b}(window.Modulog),function(a){var b=function(){};b.VERSION="0.0.1";var c=a.$,d=null,e=ModulogLog,f="Modulog | ModulogConfig";b.get=function(a){for(var b=a.split("."),c=d,e=0;e<b.length;e++){var f=b[e];c.hasOwnProperty(f)||ModulogLog.warn("Config value not found: "+a,"CONFIG"),c=c[f]}return c},b.set=function(a,b){for(var c=a.split("."),e=d,f=0;f<c.length-1;f++)e=e[c[f]];e[c.pop()]=b},b.init=function(a,b){"string"==typeof a&&jQuery?c.getJSON(a,function(a){d=a,"function"==typeof b&&b()}):"object"==typeof a?d=a:e.error("Could not init config. init() function expects config object or url to config.js. Latter needs jQuery to be initialized before.",f)},window.Config=window.MConfig=window.ModulogConfig=b}(window.Modulog),function(a,b){var c=function(){};c.VERSION="2.0.2",c.$=b;a.EC=a.EdgeCommons=c}(window,AdobeEdge.$),function(a){function b(b,c,d){try{var e=a.getChildSymbols(b,d),f=b.getComposition(),e=f.getSymbols();for(var g in e){var h=e[g];if(isPlaying=h.isPlaying(),c){var i=h.getVariable("_ec_playState");"playing"===i?h.play():"playingReverse"===i&&h.playReverse()}else{var i=isPlaying?h.isPlayDirectionReverse()?"playingReverse":"playing":"stopped";h.setVariable("_ec_playState",i),h.stop()}}}catch(j){console.error(j.toString())}}var c=function(){};c.VERSION="1.1.0";var d=a.$,e=ModulogLog,f="EdgeCommons | Core",g=null,h=null,i=null,j=null;a.centerStage=function(b,c){b&&b instanceof AdobeEdge.Symbol||e.error("centerStage(): First argument 'sym' is not optional and has to be a symbol",f),c||d("body").css("overflow-x","hidden"),a.centerElement(b.getComposition().getStage().getSymbolElement())},a.centerElement=function(a){a&&a.css||e.error("centerElement(): First argument 'el' is not optional and has to be of type AdobeEdge.$ or jQuery element",f),a.css({left:"50%","margin-left":-Math.round(a.width()/2)+"px"})},a.getSymbolName=function(a,b){var c=a._variables.symbolSelector;if(!b){var d=a.getParentSymbol();d&&(c=c.replace(d.getVariable("symbolSelector")+"_",""))}return c=c.replace("#","")},a.getInjectedData=function(a,b){try{for(b=b||"data",a&&a.getParentSymbol||e.error("getInjectedData(): First argument 'sym' is not optional",f);a.getParentSymbol();)a=a.getParentSymbol();var c=a.getSymbolElement().find("."+b).html(),g=d.parseJSON(c);return g}catch(h){e.error("Reading injected data failed (scriptClassSelector="+b+")",f,h)}},a.setAdaptiveLayouts=function(b,c,h,i,k){return b&&b.length?(g=b,k=!!k,c&&("function"==typeof i&&(j=i),d(window).bind("resize",function(){a.applyAdaptiveLayout(c,h,k)}),a.applyAdaptiveLayout(c,h,k)),void 0):(e.error("Error in setAdaptiveLayouts(). Argument 'layouts' is not optional and has to be an array.",f),void 0)},a.applyAdaptiveLayout=function(a,b,c){try{a.setVariable("doResizing",function(){var e=a.getComposition().getStage(),f=c?d(window).width():e.getSymbolElement().width(),k=a.$(b),l=0,m=null;if(d.each(g,function(a,b){f>=b-l&&(m=b)}),h!=m){i&&i.deleteSymbol(),k.html("");var n=a.createChildSymbol("layout"+m,b);h=m,i=n,"function"==typeof j&&j(m,n)}});var e=a.getVariable("doResizing");e()}catch(f){console.error(f)}},a.isJQuery=function(){return!(!AdobeEdge.$.fn||!AdobeEdge.$.fn.jquery)},a.loadComposition=function(b,c){if(!b||!c)return e.error("Error in loadComposition(). Arguments 'src' and 'sym' are not optional.",f),void 0;try{var d;d=c instanceof AdobeEdge.Symbol?c.getSymbolElement():c;var g="ec_"+Math.random().toString(36).substring(7);d.html('<iframe id="'+g+'" src="'+b+'" style="visibility:hidden; overflow: hidden; width: 100%; height: 100%; margin: auto; border: 0 none; background-color: rgba(255,255,255,0)" onload="this.style.visibility=\'visible\';"></iframe>');var h=new jQuery.Deferred,i=jQuery("#"+g),j=i[0].contentWindow;i.load(function(){j.AdobeEdge.bootstrapCallback(function(a){var b=j.AdobeEdge.getComposition(a);h.resolve(b,g,j.AdobeEdge)})})}catch(k){a.error("Error in loadComposition: ",f,k.toString())}return h},a.makeStaticButton=function(b,c,d,e,f){var g=b.$("hotspot"),h=g[0]?g:b.getSymbolElement();c&&b.$("label").html(c),d&&b.$("icon").css("background-image","url("+d+")"),f&&b.setVariable("data",f),"function"==typeof b.getVariable("ready")&&b.getVariable("ready")(f),h.css("cursor","pointer"),a.isMobile()||(h.on("mouseenter",function(){b.stop("over")}),h.on("mouseleave",function(){b.stop("normal")}),h.on("mousedown",function(){b.stop("down")}),h.on("mouseup",function(){b.stop("over")})),h.on(a.CLICK_OR_TOUCH,function(){"function"==typeof e&&e(b,f)})},a.makeAnimatedButton=function(b,c,d,e,f){var g=b.$("hotspot"),h=g[0]?g:b.getSymbolElement();c&&b.$("label").html(c),d&&b.$("icon").css("background-image","url("+d+")"),f&&b.setVariable("data",f),"function"==typeof b.getVariable("ready")&&b.getVariable("ready")(f),h.css("cursor","pointer"),a.isMobile()?(b.setVariable("animatedButtonState","inactive"),h.on("touchstart",function(){var a="inactive"!==b.getVariable("animatedButtonState");a?("function"==typeof e&&e(b,f),b.setVariable("animatedButtonState","inactive"),b.playReverse()):(b.play(),b.setVariable("animatedButtonState","active"),setTimeout(function(){b.getPosition()>0&&b.playReverse(),b.setVariable("animatedButtonState","inactive")},2e3))})):(h.on("mouseenter",function(){b.play()}),h.on("mouseleave",function(){b.playReverse()}),h.on("click",function(){"function"==typeof e&&e(b,f)}))},a.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)},a.CLICK_OR_TOUCH=a.isMobile()?"touchstart":"click",a.readGetParam=function(a){var b=new RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);return b?decodeURIComponent(b[1]||0):null},a.addCSS=function(a,b,c){function d(a,b,c,d){"insertRule"in a?a.insertRule(b+"{"+c+"}",d):"addRule"in a&&a.addRule(b,c,d)}c=c?c:1;var e="";for(var f in b)e+=f+": "+b[f]+";";d(document.styleSheets[0],a,e,c)},a.readHashFromURL=function(){var a=new RegExp("#([^ |^?|^&|^=]*)").exec(window.location.href);return a?decodeURIComponent(a[0]):null},a.setMetaViewport=function(a,b){var b;switch(a){case"custom":b=b;break;case"nozoom":b="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no";break;case"init":default:b="width=device-width, initial-scale=1.0"}d("head").append('<meta name="viewport" content="'+b+'">')},a.getChildSymbols=function(b,c,d){c=c!==!1?!0:!1,d=d?d:[];var e=b.getChildSymbols();if(e.length>0){var f=0,g=e.length;for(f;g>f;f++)d.push(e[f]),c&&a.getChildSymbols(e[f],c,d)}return d},a.pause=function(a,c){b(a,!1,c)},a.unpause=function(a,c){b(a,!0,c)},a.Core=c,a.Log=e,a.debug=e.debug,a.info=e.info,a.warn=e.warn,a.error=e.error,a.Config=MConfig}(EdgeCommons),function(a){var b=function(){};b.VERSION="2.0.0",b.compositions={};var c=a.$,d=ModulogLog,e="EdgeCommons | Parallax";b.addComposition=function(a){AdobeEdge.getComposition(a).getStage().getSymbolElement().height()||d.error("Height of stage is not available yet. Make sure you are using compositionReady instead of creationComplete",e),this.compositions[a]={};var b=AdobeEdge.getComposition(a).getStage();this.compositions[a].stage=b;var c=AdobeEdge.getComposition(a).getStage().getSymbolElement();this.compositions[a].stageElement=c;var f=c.height(),g=c.width();this.compositions[a].stageHeight=f,this.compositions[a].stageWidth=g;var h=c.css("top");this.compositions[a].stageTop=h,this.compositions[a].stageMiddle=Math.floor(h+f/2),this.compositions[a].duration=b.getDuration(),b.stop(0)},b.setup=function(b,f){return b?(void 0===f&&(f="vertical"),this.addComposition(b.getComposition().getCompId()),c(document).bind("scroll",function(){function b(){for(var b in a.Parallax.compositions){var d=a.Parallax.compositions[b],f=e/(d.stageHeight-c(window).height()),g=Math.floor(f*d.duration);d.stage.stop(g)}}function d(){for(var b in a.Parallax.compositions){var d=a.Parallax.compositions[b],f=e/(d.stageWidth-c(window).width()),g=Math.floor(f*d.duration);d.stage.stop(g)}}if("vertical"==f){var e=c("body")[0].scrollTop;b()}else if("horizontal"==f){var e=c("body")[0].scrollLeft;d()}}),void 0):(d.error("Error in setup(). Argument 'sym' is not optional.",e),void 0)},a.Parallax=b}(EdgeCommons),function(a){var b=function(){};b.VERSION="1.0.0";var c=a.$,d=ModulogLog,e="EdgeCommons | Spotlight";b.setup=function(){},b.open=function(b,f){try{if("image"!=b.type&&"animate"!=b.type&&"youtube"!=b.type)return d.error("Error in open(). Unsupported type: "+b.type,e),void 0;void 0==f&&(f=window.top.document),b.width=b.width||400,b.height=b.height||600,b.borderWidth=b.borderWidth||5,b.borderColor=b.borderColor||"#FFF";var g='<div id="spotlight"> <div class="background"> </div> </div>';c("body",f).append(g);var g='<div class="base"></div>';c("#spotlight .background",f).append(g);var g='<div class="close-button"></div>';c("#spotlight .background",f).append(g);var h=c("#spotlight .close-button",f);h.css("margin-left",.5*b.width-15+b.borderWidth).css("margin-top",-.5*b.height-15);var i=c("#spotlight .base",f);i.css("width",0).css("height",0).css("margin-left",0).css("margin-top",0).css("border-width",b.borderWidth).css("border-color",b.borderColor).css("border-radius",5),i.animate({width:b.width,"margin-left":-.5*b.width,height:b.height,"margin-top":-.5*b.height},300,null,function(){c("#spotlight .content",f).css("display","inline"),c("#spotlight .fader",f).fadeOut(2e3),c("#spotlight .close-button",f).fadeIn()}),i.append('<div class="content"></div>');var j=c("#spotlight .content",f),k=document.location.href.split("/"),l=k[k.length-1];-1!=l.indexOf(".")&&k.pop();var m=k.join("/");switch(b.type){case"image":var n=-1==b.source.indexOf("http:")&&-1==b.source.indexOf("https:")?m+"/"+b.source:b.source;j.append('<img src="'+n+'" />');break;case"animate":var n=-1==b.source.indexOf("http:")&&-1==b.source.indexOf("https:")?m+"/"+b.source:b.source;j.append('<iframe src="'+n+'" style="overflow: hidden; width: 100%; height: 100%; margin: auto; border: 0 none;"></iframe>');break;case"youtube":j.append('<iframe width="'+b.width+'" height="'+b.height+'" src="http://www.youtube.com/embed/'+b.source+"?autoplay="+(b.param&&b.param.autoPlay?"1":"0")+'" frameborder="0" allowfullscreen></iframe>')}j.append('<div class="fader"></div>');{c("#spotlight .fader",f)}return c("#spotlight .background",f).click(function(){a.Spotlight.close(b,f)}),!0}catch(o){return d.error(o.toString()),!1}},b.close=function(a,b){void 0==b&&(b=window.top.document),c("#spotlight .content",b).remove(),c("#spotlight .close-button",b).remove(),c("#spotlight .background",b).fadeOut(400);var d=c("#spotlight .base",b);d.animate({width:0,"margin-left":0,height:0,"margin-top":0,opacity:0},200,null,function(){c("#spotlight",b).remove(),"function"==typeof a.onClose&&a.onClose(a,b)})},a.Spotlight=b}(EdgeCommons),function(a){var b=function(){};b.VERSION="1.0.0";a.$;b.accessSVG=function(a){if(a.is("div")){var b=a.css("background-image").replace("url(","").replace(")","");b=b.replace('"',"")}else if(a.is("img"))var b=a.attr("src");a.css("background-image","");var c="ec_"+Math.random().toString(36).substring(7);a.append('<embed id="'+c+'" src="'+b+'" type="image/svg+xml" width="100%" height="100%" />');var d=new jQuery.Deferred,e=document.getElementById(c);return e.onload=function(){var a=e.getSVGDocument();a.notify=function(a,b){var c=document.createEvent("CustomEvent");c.initEvent(b,!0,!0),a.dispatchEvent(c)},d.resolve(a,e,c)},d},a.SVG=b}(EdgeCommons);