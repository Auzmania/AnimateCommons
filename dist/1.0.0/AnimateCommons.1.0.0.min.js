/* Animate Commons v1.0.0 - Dirty Little Helpers for Adobe Animate CC +++ Visit animatecommons.io for documentation, updates and examples +++ Copyright (c) 2016 by Simon Widjaja +++ Distributed under the terms of the MIT license (http://www.opensource.org/licenses/mit-license.html) +++ This notice shall be included in all copies or substantial portions of the Software.*/

!function(t){if(!t.AnimateCommons){var e=t.AnimateCommons=function(t){this.context=t};e.prototype={getCanvasId:function(){return this.getCanvas().id},getParent:function(){return this.context.parent?n(this.context.parent):null},getAllParents:function(){for(var t=this.context.parent,e=[];t;)e.push(t),t=t.parent;return e},getStage:function(){for(var t=this,e=this.getParent();e;)t=e,e=e.getParent();return t},getCanvas:function(){return this.getStage().context.canvas},getComposition:function(){return n.getComposition(this.context)},getId:function(){var t=this.context.parent;for(var e in t)if(t.hasOwnProperty(e)&&t[e]===this.context)return e},getSymbolDefinitionName:function(e){var e=e||t.lib,n=void 0;if(e)for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];"function"==typeof o&&this.context instanceof o&&(n=i)}return n},getGlobalScaleFactor:function(){for(var t=this.getAllParents(),e=this.context.scaleX,n=this.context.scaleY,i=0;i<t.length-1;i++)e*=t[i].scaleX,n*=t[i].scaleY;return{scaleX:e,scaleY:n}}};var n=t.AC=function(t){return new e(t)};n._compositions={},n.getComposition=function(t){var e=n(t),i=e.getStage(),o=n._compositions[i.getCanvasId()];return o||(o=n._compositions[i.getCanvasId()]=new n.Composition({id:e.getCanvasId(),canvas:i.getCanvas(),stage:i})),o},n.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)||!1},n.getDevicePixelRatio=function(){var e=1;return void 0!==t.screen.systemXDPI&&void 0!==t.screen.logicalXDPI&&t.screen.systemXDPI>t.screen.logicalXDPI?e=t.screen.systemXDPI/t.screen.logicalXDPI:void 0!==t.devicePixelRatio&&(e=t.devicePixelRatio),e=e>=1&&e<=10?e:1},n.applyDefaults=function(t,e){!t&&(t={});for(var n in t)e[n]=t[n];return e},n.destroyR=function(t,e){var i=t.parent||e;if(i)for(var o=i.timeline,a=0;a<o._tweens.length;a++){var r=o._tweens[a];r.target==t&&(o.removeTween(r),r.removeAllEventListeners(),r.removeAllTweens&&r.removeAllTweens(),r.target=null,r=null),o[a]=null}for(var s=0;s<t.children.length;s++){var c=t.children[s];c.children&&c.children.length&&destroyR(c,null),c.removeAllEventListeners(),c.removeAllChildren&&c.removeAllChildren(),c.parent&&c.parent.removeChild(c),c=null,delete c}if(e){var l=n(t).getId();if(!l)for(var p in e)i.hasOwnProperty(p)&&e[p]===t&&(l=p);console.log("removing: ",l,", from: ",e),e.removeChild(t),e[l]=null}},n.getSymbolDefinitions=function(e){e=e?e:t.lib;var n={};for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];"function"==typeof o&&o.prototype.timeline&&Object.getPrototypeOf(o)==Object.getPrototypeOf(createjs.MovieClip)&&(n[i]=o)}return n},n.throttle=function(t,e,n){e||(e=250);var i,o;return function(){var a=n||this,r=+new Date,s=arguments;i&&r<i+e?(clearTimeout(o),o=setTimeout(function(){i=r,t.apply(a,s)},e)):(i=r,t.apply(a,s))}}}}(window),function(t,e){t.Composition=function(t){this.id=t.id,this.canvas=t.canvas,this.stage=t.stage,this.isAutoScale=t.isAutoScale||!1,this.scaleFactor=t.scaleFactor||1,this.devicePixelRatio=t.devicePixelRatio||1,this.store={}},t.Composition.prototype={set:function(t,e){for(var n=t.split("."),i=this.store,o=0;o<n.length;o++){var a=n[o];o===n.length-1?i[a]=e:i=i[a]=i[a]?i[a]:{}}},get:function(t){for(var e=t.split("."),n=this.store,i=0;i<e.length;i++){var o=e[i];n="object"==typeof n?n[o]:n}return n}}}(window.AC,window.AnimateCommons),function(t,e){t.AdaptiveLayout={setup:function(e,n){function i(){var e=t.getSymbolDefinitions(n.lib);for(var i in e){var o=i.match(/^Layout(\d{0,4})x(\d{0,4})/);if(e.hasOwnProperty(i)&&o){var a=e[i],r={minW:parseInt(o[1]),sym:a};n.breakpoints.push(r)}}}n=t.applyDefaults(n,{lib:window.lib,maxWidth:null,maxHeight:null,originX:50,originY:50,breakpoints:[]});var o,a=t(t(e).getStage().context.children[0]),r=a.getCanvas(),s=t.getDevicePixelRatio(),c={compW:parseInt(r.style.width),compH:parseInt(r.style.height)},l=function(){var e=parseInt(window.getComputedStyle(a.getCanvas().parentElement).width),i=parseInt(window.getComputedStyle(a.getCanvas().parentElement).height);e/c.compW>i/c.compH?i/c.compH:e/c.compW;r.style.width=e+"px",r.style.height=i+"px",r.setAttribute("width",e*s+"px"),r.setAttribute("height",i*s+"px");var l=1;a.context.x=Math.round((0-(c.compW*l-e))*(n.originX/100)),a.context.y=Math.round((0-(c.compH*l-i))*(n.originY/100));var p=a.getStage(),h=new createjs.Event("sizeChange");h.width=e,h.height=i,p.context.dispatchEvent(h);for(var m={minW:0},u=n.breakpoints,v=0;v<u.length;v++){var g=u[v];e>=g.minW&&g.minW>=m.minW&&(m=g)}if(m!=o){o=m;for(var d=[],v=0;v<a.context.children.length;v++){var f=a.context.children[v];f instanceof createjs.MovieClip&&0==t(f).getSymbolDefinitionName(n.lib).indexOf("Layout")&&d.push(f)}for(var v=0;v<d.length;v++)"function"==typeof f.destroyLayout&&f.destroyLayout(),a.context.removeChild(d[v]);var w=a.context.addChild(new m.sym);w.x=c.compW/2-m.minW/2,setTimeout(function(){"function"==typeof w.activevateLayout&&w.activevateLayout()},100)}};i(),window.addEventListener("resize",function(t){l()}),l()}}}(window.AC,window.AnimateCommons),function(t,e){t.FlexibleLayout={setup:function(e,n){n=t.applyDefaults(n,{lib:window.lib,maxWidth:null,maxHeight:null,originX:50,originY:50});var i=t(t(e).getStage().context.children[0]),o=i.getCanvas(),a=t.getDevicePixelRatio(),r={compW:n.lib.properties.width,compH:n.lib.properties.height},s=function(){i.getCanvas().parentElement.style.width="100%";var t=parseInt(window.getComputedStyle(i.getCanvas().parentElement.parentElement).width),e=parseInt(window.getComputedStyle(i.getCanvas().parentElement.parentElement).height),s=t/r.compW>e/r.compH?e/r.compH:t/r.compW;o.style.width=t+"px",o.style.height=e+"px",o.setAttribute("width",t*a+"px"),o.setAttribute("height",e*a+"px");var c=Math.min(n.maxWidth&&r.compW*s>n.maxWidth?n.maxWidth/r.compW:s,n.maxHeight&&r.compH*s>n.maxHeight?n.maxHeight/r.compH:s);i.context.scaleX=i.context.scaleY=c,i.context.x=Math.round((0-(r.compW*c-t))*(n.originX/100)),i.context.y=Math.round((0-(r.compH*c-e))*(n.originY/100))};window.addEventListener("resize",function(t){s()}),s()}}}(window.AC,window.AnimateCommons),function(t,e){t.Parallax={setup:function(e,n){var i=[];n=t.applyDefaults(n,{compWidth:lib.properties.width,throttle:100,speed:600}),setTimeout(function(){for(var n=0;n<e.children.length;n++){var o=e.children[n],a=t(o).getId(),r=a.match(/^parallax(\d{0,4})/);null!=r&&i.push({sym:o,initX:o.x,factor:r[1]})}},100);var o=t(e).getComposition();o.stage.context.on("stagemousemove",t.throttle(function(t){for(var e=(t.stageX-n.compWidth)/2,o=0;o<i.length;o++){var a=i[o];createjs.Tween.get(a.sym,{override:!0}).to({x:a.initX-e/a.factor},n.speed,createjs.Ease.cubicOut)}},n.throttle)),t.isMobile()&&window.addEventListener("deviceorientation",t.throttle(function(t){if(t.beta){var e=1,o=t.beta.toFixed(e);n.speed=2e3;for(var a=20*o,r=0;r<i.length;r++){var s=i[r];s.sym.x=s.initX+a/s.factor}}},10))}}}(window.AC,window.AnimateCommons);